<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>CIKM 2022 AnalytiCup Competition - FederatedScope</title>
<meta name="description" content="Easy Federated Learning, Safe Knowledge Sharing.">


  <meta name="author" content="Data Analytics and Intelligence Lab (DAIL) of DAMO Academy">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="FederatedScope">
<meta property="og:title" content="CIKM 2022 AnalytiCup Competition">
<meta property="og:url" content="https://federatedscopeteam.github.io/competition/">


  <meta property="og:description" content="Easy Federated Learning, Safe Knowledge Sharing.">



  <meta property="og:image" content="https://federatedscopeteam.github.io/assets/images/site-logo.png">



  <meta name="twitter:site" content="@mmistakes">
  <meta name="twitter:title" content="CIKM 2022 AnalytiCup Competition">
  <meta name="twitter:description" content="Easy Federated Learning, Safe Knowledge Sharing.">
  <meta name="twitter:url" content="https://federatedscopeteam.github.io/competition/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="https://federatedscopeteam.github.io/assets/images/site-logo.png">
    
  

  







  

  


<link rel="canonical" href="https://federatedscopeteam.github.io/competition/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Data Analytics and Intelligence Lab (DAIL) of DAMO Academy",
      "url": "https://federatedscopeteam.github.io/",
      "sameAs": ["https://twitter.com/mmistakes","https://www.facebook.com/michaelrose"]
    
  }
</script>


  <meta name="google-site-verification" content="UQj93ERU9zgECodaaXgVpkjrFn9UrDMEzVamacSoQ8Y" />






<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="FederatedScope Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="shortcut icon" type="image/png" href="https://img.alicdn.com/imgextra/i1/O1CN018QJmTK1vLxKVTFziU_!!6000000006157-2-tps-436-436.png">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          <img src=https://img.alicdn.com/imgextra/i2/O1CN01cCDBCY1a354ojQtsJ_!!6000000003273-2-tps-2536-383.png alt="Logo" height="30" width="210">
          <span class="site-subtitle"></span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/docs/documentation/" target="">Tutorials</a>
            </li><li class="masthead__menu-item">
              <a href="https://colab.research.google.com/github/alibaba/FederatedScope" target="_blank">Playground</a>
            </li><li class="masthead__menu-item">
              <a href="/refs/index" target="_blank">API References</a>
            </li><li class="masthead__menu-item">
              <a href="/news/" target="">News</a>
            </li><li class="masthead__menu-item">
              <a href="/pub/" target="">Publications</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="CIKM 2022 AnalytiCup Competition">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">CIKM 2022 AnalytiCup Competition
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#federated-hetero-task-learning">Federated Hetero-Task Learning</a><ul><li><a href="#awards">Awards</a></li><li><a href="#schedule">Schedule</a></li></ul></li><li><a href="#step-by-step-guidance-for-cikm22-analyticup-competition">Step-by-step Guidance for CIKM22 AnalytiCup Competition</a><ul><li><a href="#step1-install-federatedscope">Step1. Install FederatedScope</a></li><li><a href="#step-2-setup-the-running-environment">Step 2. Setup the running environment</a></li><li><a href="#step-3-download-contest-data">Step 3. Download contest data</a></li><li><a href="#step-4-execute-baselines-on-the-contest-data">Step 4. Execute baselines on the contest data</a></li><li><a href="#step-5-save-and-submit-the-prediction-results">Step 5. Save and submit the prediction results</a></li></ul></li><li><a href="#advanced-guidance-for-participants">Advanced Guidance for Participants</a><ul><li><a href="#about-federatedscope">About FederatedScope</a></li><li><a href="#develop-your-own-solution">Develop your own solution</a></li></ul></li><li><a href="#for-more-help">For More Help</a></li></ul>

            </nav>
          </aside>
        
        <h1 id="federated-hetero-task-learning">Federated Hetero-Task Learning</h1>

<h2>Introduction</h2>

<p>We propose a new task, federated hetero-task learning, which meets the requirements of a wide range of real-world scenarios, while also promoting the interdisciplinary research of Federated Learning with Multi-task Learning, Model Pre-training, and AutoML. We have prepared an easy-to-use toolkit based on <strong>FederatedScope [1,2]</strong> to help participants easily explore this challenging yet manageable task from several perspectives, and also set up a fair testbed and different formats of awards for participants.</p>

<p><strong>We are running this competition on Tianchi competition platform. Please visit this <a href="https://tianchi.aliyun.com/competition/entrance/532008/introduction">link</a>.</strong></p>

<h2 id="awards">Awards</h2>

<ul>
  <li>Prizes:
    <ul>
      <li>1st place: 5000 USD</li>
      <li>2nd place: 3000 USD</li>
      <li>3rd place: 1500 USD</li>
      <li>4th ~ 10th place: 500 USD each</li>
    </ul>
  </li>
  <li>Certification:
    <ul>
      <li>1st ~ 20th: Certification with rank</li>
      <li>Others: Certification with participation</li>
    </ul>
  </li>
</ul>

<h2 id="schedule">Schedule</h2>

<ul>
  <li>July 15, 2022: Competition launch. Sample dataset releases and simulation environment opens. Participants can register, join the discussion forum, upload the code for training and get feedback from leadboard.</li>
  <li>Sept 1, 2022: Registration ends.</li>
  <li>Sept 11, 2022: Submission ends.</li>
  <li>Sept 12, 2022: Checking phase starts. Codes of top 30 teams will automatically be migrated into a checking phase.</li>
  <li>Sept 18, 2022: Notification of checking results.</li>
  <li>Sept 21, 2022: Announcement of the CIKM 2022 AnalytiCup Winner.</li>
  <li>Oct 17, 2022: Beginning of CIKM 2022.</li>
</ul>

<p>All deadlines are at <strong>11:59 PM UTC</strong> on the corresponding day. The organizers reserve the right to update the contest timeline if necessary.</p>

<h2>Problem description</h2>

<p>In federated hetero-task learning, the learning goals of different clients are different. In practice, this setting is often observed due to personalized requirements of different clients, or the difficulty in aligning goals among multiple clients. Specifically, the problem is defined as follows:</p>

<ul>
  <li>Input: Several clients, each one is associated with a different dataset (feature space can be different) and a different learning objective.</li>
  <li>Output: A learned model for each client.</li>
  <li>Evaluation metric: The averaged improvement ratio (against the provided “isolated training” baseline) across all the clients.</li>
</ul>

<p>More details can be found in this <a href="https://tianchi.aliyun.com/competition/entrance/532008/information">page</a>.</p>

<p>We provide the dataset for this competition via Tianchi. At the same time, we encourage you to see the exemplary federated hetero-task learning datasets defined in <strong>B-FHTL [3]</strong>, where the design and construction of these datasets are illustrated in the following picture:
<img src="https://img.alicdn.com/imgextra/i3/O1CN01yVaEBB25d2Gnu9mnh_!!6000000007548-0-tps-3422-1888.jpg" width="480" class="align-center" /></p>

<h2>References</h2>

<p>[1] FederatedScope: A Flexible Federated Learning Platform for Heterogeneity. arXiv preprint 2022. <a href="https://arxiv.org/pdf/2204.05011.pdf">pdf</a></p>

<p>[2] FederatedScope-GNN: Towards a Unified, Comprehensive and Efficient Package for Federated Graph Learning. KDD 2022. <a href="https://arxiv.org/pdf/2204.05562.pdf">pdf</a></p>

<p>[3] A Benchmark for Federated Hetero-Task Learning. arXiv preprint 2022. <a href="https://arxiv.org/pdf/2206.03436v2.pdf">pdf</a></p>

<h1 id="step-by-step-guidance-for-cikm22-analyticup-competition">Step-by-step Guidance for CIKM22 AnalytiCup Competition</h1>

<h2 id="step1-install-federatedscope">Step1. Install FederatedScope</h2>

<p>Download FederatedScope and switch to the stable branch <code class="language-plaintext highlighter-rouge">cikm22competition</code> for this competition:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/alibaba/FederatedScope.git

<span class="nb">cd </span>FederatedScope

git checkout cikm22competition
</code></pre></div></div>

<h2 id="step-2-setup-the-running-environment">Step 2. Setup the running environment</h2>

<p>You can use Docker or Conda to setup your running environment</p>

<ul>
  <li>
    <p>Use Docker</p>

    <ul>
      <li>
        <p>Check your cuda version via the command</p>

        <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  nvidia-smi
</code></pre></div>        </div>
      </li>
      <li>
        <p>Build the corresponding docker image</p>
        <ul>
          <li>
            <p>If your CUDA Version &gt;= 11:</p>

            <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build <span class="nt">-f</span> environment/docker_files/federatedscope-torch1.10-application.Dockerfile <span class="nt">-t</span> alibaba/federatedscope:base-env-torch1.10 <span class="nb">.</span>
      
docker run <span class="nt">--gpus</span> <span class="nv">device</span><span class="o">=</span>all <span class="nt">--rm</span> <span class="nt">-it</span> <span class="nt">--name</span> <span class="s2">"fedscope"</span> <span class="nt">-v</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>:<span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span> <span class="nt">-w</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span> alibaba/federatedscope:base-env-torch1.10 /bin/bash
      
pip <span class="nb">install</span> <span class="nt">-e</span> <span class="nb">.</span>
</code></pre></div>            </div>
          </li>
          <li>
            <p>If your CUDA Version &gt;= 10 but &lt;11:</p>

            <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build <span class="nt">-f</span> environment/docker_files/federatedscope-torch1.8-application.Dockerfile <span class="nt">-t</span> alibaba/federatedscope:base-env-torch1.8 <span class="nb">.</span>
      
docker run <span class="nt">--gpus</span> <span class="nv">device</span><span class="o">=</span>all <span class="nt">--rm</span> <span class="nt">-it</span> <span class="nt">--name</span> <span class="s2">"fedscope"</span> <span class="nt">-v</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>:<span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span> <span class="nt">-w</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span> alibaba/federatedscope:base-env-torch1.8 /bin/bash
      
pip <span class="nb">install</span> <span class="nt">-e</span> <span class="nb">.</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Use Conda</p>

    <ul>
      <li>
        <p>We recommend using a new virtual environment to install FederatedScope:</p>

        <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  conda create <span class="nt">-n</span> fs <span class="nv">python</span><span class="o">=</span>3.9
  conda activate fs
</code></pre></div>        </div>
      </li>
      <li>
        <p>If you are using torch, please install it in advance (<a href="https://pytorch.org/get-started/locally/">torch-get-started</a>). For example, if your cuda version is 11.3 please execute the following command:</p>

        <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  conda <span class="nb">install</span> <span class="nt">-y</span> <span class="nv">pytorch</span><span class="o">=</span>1.10.1 <span class="nv">torchvision</span><span class="o">=</span>0.11.2 <span class="nv">torchaudio</span><span class="o">=</span>0.10.1 <span class="nv">cudatoolkit</span><span class="o">=</span>11.3 <span class="nt">-c</span> pytorch <span class="nt">-c</span> conda-forge
</code></pre></div>        </div>
      </li>
      <li>
        <p>Install the required packages as follows</p>

        <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  python setup.py <span class="nb">install</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>Finally, install packages required by graph tasks as follows</p>

        <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  bash environment/extra_dependencies_torch1.10-application.sh
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h2 id="step-3-download-contest-data">Step 3. Download contest data</h2>

<ul>
  <li>
    <p>Click sign up in <a href="https://tianchi.aliyun.com/competition/entrance/532008/introduction">Tianchi</a>, and register your account as follows if you don’t have one.</p>

    <figure>
<img src="https://gw.alicdn.com/imgextra/i3/O1CN018QES7i1HpeOQk2BW6_!!6000000000807-2-tps-5120-2610.png" width="480" />
<figcaption>Click sign up in Tianchi.</figcaption>
</figure>

    <figure>
<img src="https://gw.alicdn.com/imgextra/i1/O1CN01ZnsXhT1RUG3ArkI1U_!!6000000002114-2-tps-5120-2606.png" width="480" />
<figcaption>Register your account.</figcaption>
</figure>
  </li>
  <li>
    <p>Login and download the <a href="https://tianchi.aliyun.com/competition/entrance/532008/information">contest data</a></p>

    <figure>
<img src="https://img.alicdn.com/imgextra/i4/O1CN015Po1qF24yH1ZKWJ86_!!6000000007459-2-tps-5120-2608.png" width="480" />
<figcaption>Download the contest data.</figcaption>
</figure>
  </li>
  <li>
    <p>Suppose the contest data is placed in <code class="language-plaintext highlighter-rouge">${YOUR_OWN_PATH}/CIKM22Competition.zip</code>, unzip the contest data as follows</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nb">mkdir </span>data
  unzip <span class="nt">-d</span> ./data/ <span class="k">${</span><span class="nv">YOUR_OWN_PATH</span><span class="k">}</span>/CIKM22Competition.zip
</code></pre></div>    </div>
  </li>
  <li>
    <p>Then you can access the contest data with the directory <code class="language-plaintext highlighter-rouge">FederatedScope/data/CIKM22Competition</code>. The contest data is organized by the index of the client <code class="language-plaintext highlighter-rouge">CIKM22Competition/${client_id}</code> (counts from 1), and the data of each client contains the train, test and validate splitted parts. You can load it by <code class="language-plaintext highlighter-rouge">torch.load</code> as follows:</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">import</span> <span class="nn">torch</span>
  <span class="c1"># The train split of client 1
</span>  <span class="n">train_data_client1</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="s">'./data/CIKM22Competition/1/train.pt'</span><span class="p">)</span>
  <span class="c1"># Check the first sample
</span>  <span class="k">print</span><span class="p">(</span><span class="n">train_data_client1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
  <span class="c1"># Check the label of the first sample
</span>  <span class="k">print</span><span class="p">(</span><span class="n">train_data_client1</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">y</span><span class="p">)</span>
  <span class="c1"># Check the index of the first sample as ${sample_id}
</span>  <span class="k">print</span><span class="p">(</span><span class="n">train_data_client1</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">data_index</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="step-4-execute-baselines-on-the-contest-data">Step 4. Execute baselines on the contest data</h2>

<p>Within FederatedScope, we build in two baselines for the contest data, “isolated training” and “FedAvg”. Suppose you have successfully built the running environment, and downloaded the contest data</p>

<ul>
  <li>
    <p>Run the following command to execute the isolated training</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python federatedscope/main.py <span class="nt">--cfg</span> federatedscope/gfl/baseline/isolated_gin_minibatch_on_cikmcup.yaml <span class="nt">--client_cfg</span> federatedscope/gfl/baseline/isolated_gin_minibatch_on_cikmcup_per_client.yaml
</code></pre></div>    </div>
  </li>
  <li>
    <p>Run the following command to execute the FedAvg solution</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python federatedscope/main.py <span class="nt">--cfg</span> federatedscope/gfl/baseline/fedavg_gin_minibatch_on_cikmcup.yaml <span class="nt">--client_cfg</span> federatedscope/gfl/baseline/fedavg_gin_minibatch_on_cikmcup_per_client.yaml
</code></pre></div>    </div>
  </li>
</ul>

<p>where the argument <code class="language-plaintext highlighter-rouge">--cfg xxxx.yaml</code> specifies the global configuration, and <code class="language-plaintext highlighter-rouge">--client_cfg xxx.yaml</code> specifies the client-wise hyper parameters.</p>

<h2 id="step-5-save-and-submit-the-prediction-results">Step 5. Save and submit the prediction results</h2>

<p><strong>Submission format</strong></p>

<ul>
  <li>As stated in the <a href="https://tianchi.aliyun.com/competition/entrance/532008/information?lang=en-us">introduction of CIKM 2022 AnalytiCup Competition</a>, participants are required to submit the prediction results for all clients within one csv file. Within the file, each line records one prediction and is identified by <code class="language-plaintext highlighter-rouge">${client_id}</code> and <code class="language-plaintext highlighter-rouge">${sample_id}</code>. The <code class="language-plaintext highlighter-rouge">${client_id}</code> counts from 1 and <code class="language-plaintext highlighter-rouge">${sample_id}</code> should be consistent with the contest data (You can access it by the attribute <code class="language-plaintext highlighter-rouge">data_index</code>).</li>
  <li>The classification and multi-dimensional regression tasks follow different formats as follows:
    <ul>
      <li>
        <p>For classification tasks, each line follows (<code class="language-plaintext highlighter-rouge">${category_id}</code> counts from 0)</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>${client_id},${sample_id},${category_id}
</code></pre></div>        </div>
      </li>
      <li>
        <p>For N-dimensional regression task, each line follows</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>${client_id},${sample_id},${prediction_1st_dimension},…,${prediction_N-th_dimension}
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Saving prediction results</strong></p>

<ul>
  <li>
    <p>By FederatedScope</p>

    <ul>
      <li>The “cikm22competition” branch in FederatedScope supports to save prediction results at the end of training. You can refer to code in  <a href="https://github.com/alibaba/FederatedScope/blob/cikm22competition/federatedscope/gfl/trainer/graphtrainer.py">federatedscope/gfl/trainer/graphtrainer.py</a> and <a href="https://github.com/alibaba/FederatedScope/blob/cikm22competition/federatedscope/core/trainers/torch_trainer.py">federatedscope/core/trainers/torch_trainer.py</a>.</li>
      <li>The prediction results will be saved in a csv file named <code class="language-plaintext highlighter-rouge">prediction.csv</code>. For the convenience of users to conduct multiple experiments (e.g., for HPO), <code class="language-plaintext highlighter-rouge">prediction.csv</code> of each experimental run with a spcific configuration will be placed in this experiment’s output directory (specified by <code class="language-plaintext highlighter-rouge">outdir</code>), which will be automatically appended with a suffix of timestamp if the specified directory has been there.</li>
      <li>
        <p>The training log will report the directory of the prediction results. Taking FedAvg as an example, at the end of training FederatedScope will report the path of prediction results as follows:</p>

        <p><img src="https://img.alicdn.com/imgextra/i1/O1CN01L68gve1nGu3BNp5vL_!!6000000005063-2-tps-4766-404.png" width="480" /></p>
      </li>
      <li>
        <p>Then you can refer to the directory for prediction results.</p>

        <p><img src="https://img.alicdn.com/imgextra/i1/O1CN01ndig5n1vNmvicmDBT_!!6000000006161-2-tps-1988-887.png" width="480" /></p>
      </li>
    </ul>
  </li>
  <li>
    <p>By Yourself</p>

    <p>Also, you can save the prediction results by yourself. Within a test routine in FederatedScope, the output of the model are all saved in the context as follows,  and you can access it by <code class="language-plaintext highlighter-rouge">ctx.test_y_prob</code></p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">def</span> <span class="nf">_hook_on_fit_start_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="p">...</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="s">"{}_y_true"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">cur_data_split</span><span class="p">),</span> <span class="p">[])</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="s">"{}_y_prob"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">cur_data_split</span><span class="p">),</span> <span class="p">[])</span>
  
    <span class="p">...</span>
      
    <span class="k">def</span> <span class="nf">_hook_on_batch_forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">batch</span> <span class="o">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">data_batch</span><span class="p">.</span><span class="n">to</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">device</span><span class="p">)</span>
        <span class="n">pred</span> <span class="o">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">model</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
        <span class="c1"># TODO: deal with the type of data within the dataloader or dataset
</span>        <span class="k">if</span> <span class="s">'regression'</span> <span class="ow">in</span> <span class="n">ctx</span><span class="p">.</span><span class="n">cfg</span><span class="p">.</span><span class="n">model</span><span class="p">.</span><span class="n">task</span><span class="p">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">batch</span><span class="p">.</span><span class="n">y</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">batch</span><span class="p">.</span><span class="n">y</span><span class="p">.</span><span class="n">squeeze</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nb">long</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">label</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">label</span><span class="p">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ctx</span><span class="p">.</span><span class="n">loss_batch</span> <span class="o">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">criterion</span><span class="p">(</span><span class="n">pred</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span>
  
        <span class="n">ctx</span><span class="p">.</span><span class="n">batch_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="n">ctx</span><span class="p">.</span><span class="n">y_true</span> <span class="o">=</span> <span class="n">label</span>
        <span class="n">ctx</span><span class="p">.</span><span class="n">y_prob</span> <span class="o">=</span> <span class="n">pred</span>
  
        <span class="c1"># record the index of the ${MODE} samples
</span>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">data_batch</span><span class="p">,</span> <span class="s">'data_index'</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span>
                <span class="n">ctx</span><span class="p">,</span>
                <span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="n">ctx</span><span class="p">.</span><span class="n">cur_data_split</span><span class="si">}</span><span class="s">_y_inds'</span><span class="p">,</span>
                <span class="n">ctx</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="n">ctx</span><span class="p">.</span><span class="n">cur_data_split</span><span class="si">}</span><span class="s">_y_inds'</span><span class="p">)</span> <span class="o">+</span> <span class="n">ctx</span><span class="p">.</span><span class="n">data_batch</span><span class="p">.</span><span class="n">data_index</span><span class="p">.</span><span class="n">detach</span><span class="p">().</span><span class="n">cpu</span><span class="p">().</span><span class="n">numpy</span><span class="p">().</span><span class="n">tolist</span><span class="p">()</span>
            <span class="p">)</span>
      
    <span class="p">...</span>
      
    <span class="k">def</span> <span class="nf">_hook_on_batch_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="p">...</span>
        <span class="c1"># cache label for evaluate
</span>        <span class="n">ctx</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"{}_y_true"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">cur_data_split</span><span class="p">)).</span><span class="n">append</span><span class="p">(</span>
            <span class="n">ctx</span><span class="p">.</span><span class="n">y_true</span><span class="p">.</span><span class="n">detach</span><span class="p">().</span><span class="n">cpu</span><span class="p">().</span><span class="n">numpy</span><span class="p">())</span>
  
        <span class="n">ctx</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"{}_y_prob"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">cur_data_split</span><span class="p">)).</span><span class="n">append</span><span class="p">(</span>
            <span class="n">ctx</span><span class="p">.</span><span class="n">y_prob</span><span class="p">.</span><span class="n">detach</span><span class="p">().</span><span class="n">cpu</span><span class="p">().</span><span class="n">numpy</span><span class="p">())</span>
      
    <span class="p">...</span>
      
    <span class="k">def</span> <span class="nf">_hook_on_fit_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="s">"""Evaluate metrics.
  
        """</span>
        <span class="nb">setattr</span><span class="p">(</span>
            <span class="n">ctx</span><span class="p">,</span> <span class="s">"{}_y_true"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">cur_data_split</span><span class="p">),</span>
            <span class="n">np</span><span class="p">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"{}_y_true"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">cur_data_split</span><span class="p">))))</span>
        <span class="nb">setattr</span><span class="p">(</span>
            <span class="n">ctx</span><span class="p">,</span> <span class="s">"{}_y_prob"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">cur_data_split</span><span class="p">),</span>
            <span class="n">np</span><span class="p">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"{}_y_prob"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">cur_data_split</span><span class="p">))))</span>
        <span class="p">...</span>
</code></pre></div>    </div>
  </li>
</ul>

<p><strong>Submit prediction results</strong></p>

<p>Finally, you can submit your prediction results and get your score in <a href="https://tianchi.aliyun.com/competition/entrance/532008">Tianchi</a>:</p>

<figure>
<img src="https://img.alicdn.com/imgextra/i3/O1CN01oAtui11asNRzLPxkP_!!6000000003385-2-tps-1990-820.png" width="480" />
<figcaption>Submit the prediction results.</figcaption>
</figure>

<p><strong>Get the evaluation feedback</strong>
In Tianchi, the submitted prediction results will be evaluated by the metric of “average improve ratio”, which is calculate as:</p>

\[\text{averaged improvement ratio}=\frac{1}{n}\sum_{i=1}^{n}(\frac{b_i-m_i}{b_i}\times 100\%),\]

<p>where $n$ is the total number of clients; when client $i$ owns the classification task, $m_i$ and $b_i$ are the error rate of the developed method and “isolated training” baseline, respectively; when client $i$ has a regression task, $m_i$ and $b_i$ correspond to their mean squared error (MSE).</p>

<p>To ensure a fair competition, we will use the following $b_i$for the 13 clients to calculate the averaged improvement ratio.</p>

<table>
  <thead>
    <tr>
      <th>Client ID</th>
      <th>Task type</th>
      <th>Metric</th>
      <th>$b_i$</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>cls</td>
      <td>Error rate</td>
      <td>0.263789</td>
    </tr>
    <tr>
      <td>2</td>
      <td>cls</td>
      <td>Error rate</td>
      <td>0.289617</td>
    </tr>
    <tr>
      <td>3</td>
      <td>cls</td>
      <td>Error rate</td>
      <td>0.355404</td>
    </tr>
    <tr>
      <td>4</td>
      <td>cls</td>
      <td>Error rate</td>
      <td>0.176471</td>
    </tr>
    <tr>
      <td>5</td>
      <td>cls</td>
      <td>Error rate</td>
      <td>0.396825</td>
    </tr>
    <tr>
      <td>6</td>
      <td>cls</td>
      <td>Error rate</td>
      <td>0.261580</td>
    </tr>
    <tr>
      <td>7</td>
      <td>cls</td>
      <td>Error rate</td>
      <td>0.302378</td>
    </tr>
    <tr>
      <td>8</td>
      <td>cls</td>
      <td>Error rate</td>
      <td>0.211538</td>
    </tr>
    <tr>
      <td>9</td>
      <td>reg</td>
      <td>MSE</td>
      <td>0.059199</td>
    </tr>
    <tr>
      <td>10</td>
      <td>reg</td>
      <td>MSE</td>
      <td>0.007083</td>
    </tr>
    <tr>
      <td>11</td>
      <td>reg</td>
      <td>MSE</td>
      <td>0.734011</td>
    </tr>
    <tr>
      <td>12</td>
      <td>reg</td>
      <td>MSE</td>
      <td>1.361326</td>
    </tr>
    <tr>
      <td>13</td>
      <td>reg</td>
      <td>MSE</td>
      <td>0.004389</td>
    </tr>
  </tbody>
</table>

<p>After submit the prediction results, you can check the evaluation results as follows, and the Leaderboard will update at <em>UTC time 00:00, 04:00, 08:00, 12:00 and 16:00</em>.</p>

<p><img src="https://img.alicdn.com/imgextra/i3/O1CN01iZueTJ1Di5OADICIn_!!6000000000249-2-tps-1988-1064.png" width="480" /></p>

<h1 id="advanced-guidance-for-participants">Advanced Guidance for Participants</h1>

<h2 id="about-federatedscope">About FederatedScope</h2>

<p>FederatedScope is a well-modularized federated learning platform. Participants are welcome and encouraged to develop their own federated solutions with FederatedScope. The following documents will help you better understand the organization of FederatedScope and how it works</p>

<ul>
  <li><a href="https://federatedscope.io/docs/quick-start/">Tutorial of FederatedScope</a></li>
  <li><a href="https://arxiv.org/abs/2204.05011">Paper of FederatedScope</a></li>
  <li><a href="https://federatedscope.io/refs/index">API Document of FederatedScope</a></li>
</ul>

<h2 id="develop-your-own-solution">Develop your own solution</h2>
<p>You can develop your own algorithm based on FederatedScope as follows:</p>

<ul>
  <li>If you want to improve the performance of the baseline, you can adjust the global hyper parameters (specified by <code class="language-plaintext highlighter-rouge">--cfg</code>) or adjust the hyper parameters for each client (specified by <code class="language-plaintext highlighter-rouge">--client_cfg</code>). Taking FedAvg as an example:
    <ul>
      <li>
        <p>The global configuration <code class="language-plaintext highlighter-rouge">federatedscope/gfl/baseline/isolated_gin_minibatch_on_cikmcup.yaml</code> specifies the global settings, such as the total training round (<code class="language-plaintext highlighter-rouge">federate.total_round_num</code>), dataset (<code class="language-plaintext highlighter-rouge">data.type</code> and <code class="language-plaintext highlighter-rouge">data.root</code>)  and evaluation metric (<code class="language-plaintext highlighter-rouge">eval.metrics</code>)</p>

        <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">use_gpu</span><span class="pi">:</span> <span class="s">True</span>
<span class="na">device</span><span class="pi">:</span> <span class="m">0</span>
<span class="na">early_stop</span><span class="pi">:</span>
  <span class="na">patience</span><span class="pi">:</span> <span class="m">20</span>
  <span class="na">improve_indicator_mode</span><span class="pi">:</span> <span class="s">mean</span>
  <span class="na">the_smaller_the_better</span><span class="pi">:</span> <span class="s">False</span>
<span class="na">federate</span><span class="pi">:</span>
  <span class="na">mode</span><span class="pi">:</span> <span class="s1">'</span><span class="s">standalone'</span>
  <span class="na">make_global_eval</span><span class="pi">:</span> <span class="s">False</span>
  <span class="na">total_round_num</span><span class="pi">:</span> <span class="m">100</span>
  <span class="na">share_local_model</span><span class="pi">:</span> <span class="s">False</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">root</span><span class="pi">:</span> <span class="s">data/</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">cikmcup</span>
<span class="na">model</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">gin</span>
  <span class="na">hidden</span><span class="pi">:</span> <span class="m">64</span>
<span class="na">personalization</span><span class="pi">:</span>
  <span class="na">local_param</span><span class="pi">:</span> <span class="pi">[</span><span class="s1">'</span><span class="s">encoder_atom'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">encoder'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">clf'</span><span class="pi">]</span>
<span class="na">train</span><span class="pi">:</span>
  <span class="na">batch_or_epoch</span><span class="pi">:</span> <span class="s">epoch</span>
  <span class="na">local_update_steps</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">optimizer</span><span class="pi">:</span>
    <span class="na">weight_decay</span><span class="pi">:</span> <span class="m">0.0005</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">SGD</span>
<span class="na">trainer</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">graphminibatch_trainer</span>
<span class="na">eval</span><span class="pi">:</span>
  <span class="na">freq</span><span class="pi">:</span> <span class="m">5</span>
  <span class="na">metrics</span><span class="pi">:</span> <span class="pi">[</span><span class="s1">'</span><span class="s">imp_ratio'</span><span class="pi">]</span>
  <span class="na">report</span><span class="pi">:</span> <span class="pi">[</span><span class="s1">'</span><span class="s">avg'</span><span class="pi">]</span>
  <span class="na">best_res_update_round_wise_key</span><span class="pi">:</span> <span class="s">val_imp_ratio</span>
  <span class="na">count_flops</span><span class="pi">:</span> <span class="s">False</span>
  <span class="na">base</span><span class="pi">:</span> <span class="s">0.</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>The client configuration <code class="language-plaintext highlighter-rouge">federatedscope/gfl/baseline/fedavg_gin_minibatch_on_cikmcup_per_client.yaml</code> allows you to set different hyper parameters for different clients by replacing the global configuration, and we use the argument <code class="language-plaintext highlighter-rouge">client_${client_id}</code> to specify the client. Here we set the loss function and the model according to the distributed tasks, and use <code class="language-plaintext highlighter-rouge">eval.base</code> to provide the basic performance for the metric <code class="language-plaintext highlighter-rouge">imp_ratio</code>.</p>

        <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">client_1</span><span class="pi">:</span>
  <span class="na">model</span><span class="pi">:</span>
    <span class="na">out_channels</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">task</span><span class="pi">:</span> <span class="s">graphClassification</span>
  <span class="na">criterion</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">CrossEntropyLoss</span>
  <span class="na">train</span><span class="pi">:</span>
    <span class="na">optimizer</span><span class="pi">:</span>
      <span class="na">lr</span><span class="pi">:</span> <span class="m">0.1</span>
  <span class="na">eval</span><span class="pi">:</span>
    <span class="na">base</span><span class="pi">:</span> <span class="m">0.263789</span>
<span class="na">client_2</span><span class="pi">:</span>
  <span class="na">model</span><span class="pi">:</span>
    <span class="na">out_channels</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">task</span><span class="pi">:</span> <span class="s">graphClassification</span>
  <span class="na">criterion</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">CrossEntropyLoss</span>
  <span class="na">train</span><span class="pi">:</span>
    <span class="na">optimizer</span><span class="pi">:</span>
      <span class="na">lr</span><span class="pi">:</span> <span class="m">0.01</span>
  <span class="na">eval</span><span class="pi">:</span>
    <span class="na">base</span><span class="pi">:</span> <span class="m">0.289617</span>
<span class="na">client_3</span><span class="pi">:</span>
  <span class="na">model</span><span class="pi">:</span>
    <span class="na">out_channels</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">task</span><span class="pi">:</span> <span class="s">graphClassification</span>
  <span class="na">criterion</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">CrossEntropyLoss</span>
  <span class="na">train</span><span class="pi">:</span>
    <span class="na">optimizer</span><span class="pi">:</span>
      <span class="na">lr</span><span class="pi">:</span> <span class="m">0.001</span>
  <span class="na">eval</span><span class="pi">:</span>
    <span class="na">base</span><span class="pi">:</span> <span class="m">0.355404</span>
<span class="na">client_4</span><span class="pi">:</span>
  <span class="na">model</span><span class="pi">:</span>
    <span class="na">out_channels</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">task</span><span class="pi">:</span> <span class="s">graphClassification</span>
  <span class="na">criterion</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">CrossEntropyLoss</span>
  <span class="na">train</span><span class="pi">:</span>
    <span class="na">optimizer</span><span class="pi">:</span>
      <span class="na">lr</span><span class="pi">:</span> <span class="m">0.01</span>
  <span class="na">eval</span><span class="pi">:</span>
    <span class="na">base</span><span class="pi">:</span> <span class="m">0.176471</span>
<span class="na">client_5</span><span class="pi">:</span>
  <span class="na">model</span><span class="pi">:</span>
    <span class="na">out_channels</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">task</span><span class="pi">:</span> <span class="s">graphClassification</span>
  <span class="na">criterion</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">CrossEntropyLoss</span>
  <span class="na">train</span><span class="pi">:</span>
    <span class="na">optimizer</span><span class="pi">:</span>
      <span class="na">lr</span><span class="pi">:</span> <span class="m">0.0001</span>
  <span class="na">eval</span><span class="pi">:</span>
    <span class="na">base</span><span class="pi">:</span> <span class="m">0.396825</span>
<span class="na">client_6</span><span class="pi">:</span>
  <span class="na">model</span><span class="pi">:</span>
    <span class="na">out_channels</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">task</span><span class="pi">:</span> <span class="s">graphClassification</span>
  <span class="na">criterion</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">CrossEntropyLoss</span>
  <span class="na">train</span><span class="pi">:</span>
    <span class="na">optimizer</span><span class="pi">:</span>
      <span class="na">lr</span><span class="pi">:</span> <span class="m">0.0005</span>
  <span class="na">eval</span><span class="pi">:</span>
    <span class="na">base</span><span class="pi">:</span> <span class="m">0.261580</span>
<span class="na">client_7</span><span class="pi">:</span>
  <span class="na">model</span><span class="pi">:</span>
    <span class="na">out_channels</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">task</span><span class="pi">:</span> <span class="s">graphClassification</span>
  <span class="na">criterion</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">CrossEntropyLoss</span>
  <span class="na">train</span><span class="pi">:</span>
    <span class="na">optimizer</span><span class="pi">:</span>
      <span class="na">lr</span><span class="pi">:</span> <span class="m">0.01</span>
  <span class="na">eval</span><span class="pi">:</span>
    <span class="na">base</span><span class="pi">:</span> <span class="m">0.302378</span>
<span class="na">client_8</span><span class="pi">:</span>
  <span class="na">model</span><span class="pi">:</span>
    <span class="na">out_channels</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">task</span><span class="pi">:</span> <span class="s">graphClassification</span>
  <span class="na">criterion</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">CrossEntropyLoss</span>
  <span class="na">train</span><span class="pi">:</span>
    <span class="na">optimizer</span><span class="pi">:</span>
      <span class="na">lr</span><span class="pi">:</span> <span class="m">0.05</span>
  <span class="na">eval</span><span class="pi">:</span>
    <span class="na">base</span><span class="pi">:</span> <span class="m">0.211538</span>
<span class="na">client_9</span><span class="pi">:</span>
  <span class="na">model</span><span class="pi">:</span>
    <span class="na">out_channels</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">task</span><span class="pi">:</span> <span class="s">graphRegression</span>
  <span class="na">criterion</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">MSELoss</span>
  <span class="na">train</span><span class="pi">:</span>
    <span class="na">optimizer</span><span class="pi">:</span>
      <span class="na">lr</span><span class="pi">:</span> <span class="m">0.1</span>
  <span class="na">eval</span><span class="pi">:</span>
    <span class="na">base</span><span class="pi">:</span> <span class="m">0.059199</span>
<span class="na">client_10</span><span class="pi">:</span>
  <span class="na">model</span><span class="pi">:</span>
    <span class="na">out_channels</span><span class="pi">:</span> <span class="m">10</span>
    <span class="na">task</span><span class="pi">:</span> <span class="s">graphRegression</span>
  <span class="na">criterion</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">MSELoss</span>
  <span class="na">train</span><span class="pi">:</span>
    <span class="na">optimizer</span><span class="pi">:</span>
      <span class="na">lr</span><span class="pi">:</span> <span class="m">0.05</span>
  <span class="na">grad</span><span class="pi">:</span>
    <span class="na">grad_clip</span><span class="pi">:</span> <span class="m">1.0</span>
  <span class="na">eval</span><span class="pi">:</span>
    <span class="na">base</span><span class="pi">:</span> <span class="m">0.007083</span>
<span class="na">client_11</span><span class="pi">:</span>
  <span class="na">model</span><span class="pi">:</span>
    <span class="na">out_channels</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">task</span><span class="pi">:</span> <span class="s">graphRegression</span>
  <span class="na">criterion</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">MSELoss</span>
  <span class="na">train</span><span class="pi">:</span>
    <span class="na">optimizer</span><span class="pi">:</span>
      <span class="na">lr</span><span class="pi">:</span> <span class="m">0.05</span>
  <span class="na">eval</span><span class="pi">:</span>
    <span class="na">base</span><span class="pi">:</span> <span class="m">0.734011</span>
<span class="na">client_12</span><span class="pi">:</span>
  <span class="na">model</span><span class="pi">:</span>
    <span class="na">out_channels</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">task</span><span class="pi">:</span> <span class="s">graphRegression</span>
  <span class="na">criterion</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">MSELoss</span>
  <span class="na">train</span><span class="pi">:</span>
    <span class="na">optimizer</span><span class="pi">:</span>
      <span class="na">lr</span><span class="pi">:</span> <span class="m">0.01</span>
  <span class="na">eval</span><span class="pi">:</span>
    <span class="na">base</span><span class="pi">:</span> <span class="m">1.361326</span>
<span class="na">client_13</span><span class="pi">:</span>
  <span class="na">model</span><span class="pi">:</span>
    <span class="na">out_channels</span><span class="pi">:</span> <span class="m">12</span>
    <span class="na">task</span><span class="pi">:</span> <span class="s">graphRegression</span>
  <span class="na">criterion</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">MSELoss</span>
  <span class="na">train</span><span class="pi">:</span>
    <span class="na">optimizer</span><span class="pi">:</span>
      <span class="na">lr</span><span class="pi">:</span> <span class="m">0.05</span>
  <span class="na">grad</span><span class="pi">:</span>
    <span class="na">grad_clip</span><span class="pi">:</span> <span class="m">1.0</span>
  <span class="na">eval</span><span class="pi">:</span>
    <span class="na">base</span><span class="pi">:</span> <span class="m">0.004389</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>If you want to modify the clients, it is suggested to create a new trainer that inherits the basic trainer as follows, and you can replace the original hook functions with yours. For example, you can implement your trainer with new <code class="language-plaintext highlighter-rouge">_hook_on_batch_forward</code> function, and you need to set <code class="language-plaintext highlighter-rouge">trainer.type</code> as “new_trainer” to use it.</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">federatedscope.register</span> <span class="kn">import</span> <span class="n">register_trainer</span>
<span class="kn">from</span> <span class="nn">federatedscope.core.trainers</span> <span class="kn">import</span> <span class="n">GeneralTorchTrainer</span>
  
  
<span class="k">class</span> <span class="nc">NewTrainer</span><span class="p">(</span><span class="n">GeneralTorchTrainer</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_hook_on_batch_forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="k">pass</span>
          
  
<span class="k">def</span> <span class="nf">call_new_trainer</span><span class="p">(</span><span class="n">trainer_type</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">trainer_type</span> <span class="o">==</span> <span class="s">'new_trainer'</span><span class="p">:</span>
        <span class="n">trainer_builder</span> <span class="o">=</span> <span class="n">NewTrainer</span>
        <span class="k">return</span> <span class="n">trainer_builder</span>
  
  
<span class="n">register_trainer</span><span class="p">(</span><span class="s">'new_trainer'</span><span class="p">,</span> <span class="n">call_new_trainer</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>If you want to modify the server for federated learning, it is suggested to create a new aggregator and register it to FederatedScope.
    <ul>
      <li>
        <p>First, you can inherit the following abstract class <code class="language-plaintext highlighter-rouge">Aggregator</code> in <code class="language-plaintext highlighter-rouge">federatedscope/core/aggregator.py</code> and implement your own <code class="language-plaintext highlighter-rouge">aggregate</code> function:</p>

        <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Aggregator</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
    
    <span class="o">@</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">aggregate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agg_info</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>Then you can register your aggregator within the <code class="language-plaintext highlighter-rouge">federate/core/auxiliaries/aggregator_builder.py</code>.</p>
      </li>
    </ul>
  </li>
</ul>

<h1 id="for-more-help">For More Help</h1>

<p>We encourage participants to join our Q&amp;A <a href="https://join.slack.com/t/federatedscopeteam/shared_invite/zt-1apmfjqmc-hvpYbsWJdm7D93wPNXbqww">slack channel</a> or join our DingGroup by scanning the QR code:</p>

<p><img src="https://gw.alicdn.com/imgextra/i4/O1CN01heXHpf1zuXhcOCgGF_!!6000000006774-2-tps-860-861.png" width="300" /></p>

        
      </section>

      <footer class="page__meta">
        
        


        


      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

      <div align="center" style="margin: 1em 0;">
        <ins class="adsbygoogle"
             style="display:block; border-bottom: initial;"
             data-ad-client="ca-pub-7328585512091257"
             data-ad-slot="3049671934"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
      </div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><div class="search-searchbar"></div>
  <div class="search-hits"></div></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <div class="footer-left-box">
          <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
          <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/alibaba/FederatedScope" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://damo.alibaba.com/labs/data-analytics-and-intelligence" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Team page</a></li>
        
      
        
          <li><a href="https://join.slack.com/t/federatedscopeteam/shared_invite/zt-1apmfjqmc-hvpYbsWJdm7D93wPNXbqww" rel="nofollow noopener noreferrer"><i class="fab fa-slack" aria-hidden="true"></i> Slack</a></li>
        
      
        
          <li><a href="javascript:;" rel="nofollow noopener noreferrer"><i class="dingding" aria-hidden="true"></i> Join DingGroup 👉</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2023 Data Analytics and Intelligence Lab (DAIL) of DAMO Academy. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

        </div>
        <div class="footer-group-img-box">
          <img class="footer-group-img" src="https://img.alicdn.com/imgextra/i2/O1CN01NSWjlJ1q8bliVtjRp_!!6000000005451-0-tps-924-926.jpg" alt="">
        </div>
      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>


<!-- Including InstantSearch.js library and styling -->
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch-theme-algolia.min.css">

<script>
// Instanciating InstantSearch.js with Algolia credentials
const search = instantsearch({
  appId: 'QB6HVGBSBA',
  apiKey: '9d5014e5bbc77372547bce778dfa5663',
  indexName: 'minimal_mistakes',
  searchParameters: {
    restrictSearchableAttributes: [
      'title',
      'content'
    ]
  }
});

const hitTemplate = function(hit) {
  const url = hit.url;
  const title = hit._highlightResult.title.value;
  const content = hit._highlightResult.html.value;

  return `
    <div class="list__item">
      <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
        <h2 class="archive__item-title" itemprop="headline"><a href="${url}">${title}</a></h2>
        <div class="archive__item-excerpt" itemprop="description">${content}</div>
      </article>
    </div>
  `;
}

// Adding searchbar and results widgets
search.addWidget(
  instantsearch.widgets.searchBox({
    container: '.search-searchbar',
    poweredBy: true,
    placeholder: 'Enter your search term...'
  })
);
search.addWidget(
  instantsearch.widgets.hits({
    container: '.search-hits',
    templates: {
      item: hitTemplate,
      empty: 'No results',
    }
  })
);

// Starting the search only when toggle is clicked
$(document).ready(function () {
  $(".search__toggle").on("click", function() {
    if(!search.started) {
      search.start();
    }
  });
});
</script>





  <script>
  window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
  ga('create','UA-2011187-3','auto');
  ga('set', 'anonymizeIp', true);
  ga('send','pageview')
</script>
<script src="https://www.google-analytics.com/analytics.js" async></script>








<!-- Mathjax Support -->
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    },
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>

    <style>
      .google-auto-placed {
        margin: 2em auto;
      }
    </style>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

  </body>
</html>
